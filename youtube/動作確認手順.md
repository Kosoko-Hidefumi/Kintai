# YouTube競合チャンネル分析ツール - 動作確認手順

**作成日**: 2025-11-07  
**対象者**: 開発者・テスター

## 📋 動作確認の目的

このツールが正しく動作し、要件定義書の仕様を満たしていることを確認します。

---

## ⚙️ 事前準備

### 1. Apps Script API の有効化（clasp push用）

claspを使用してコードをプッシュする場合、以下を実行してください：

1. https://script.google.com/home/usersettings にアクセス
2. 「Google Apps Script API」をオンにする
3. 数分待つ
4. ターミナルで以下を実行：

```bash
cd youtube
clasp push --force
```

### 2. スプレッドシートでの設定

1. スプレッドシートを開く
2. Apps Scriptエディタを開く（拡張機能 > Apps Script）
3. YouTube Data API v3サービスを追加：
   - エディタ左側の「サービス」(+)をクリック
   - 「YouTube Data API」を選択
   - バージョン「v3」を選択
   - 「追加」をクリック

---

## ✅ Phase 7: テスト・検証チェックリスト

### 7.1 初期セットアップのテスト

- [ ] **setupSpreadsheet関数の実行**
  - [ ] Apps Scriptエディタで`setupSpreadsheet`を選択
  - [ ] 実行ボタンをクリック
  - [ ] 権限承認ダイアログが表示される（初回のみ）
  - [ ] 承認後、完了ダイアログが表示される
  - [ ] 4つのシートが作成される：
    - [ ] 「設定」シート
    - [ ] 「チャンネルリスト」シート
    - [ ] 「チャンネル情報」シート
    - [ ] 「動画情報」シート

- [ ] **ヘッダー行の確認**
  - [ ] 各シートのヘッダー行が青色背景・白文字で表示される
  - [ ] ヘッダー行のテキストが太字になっている
  - [ ] 列幅が適切に設定されている

- [ ] **初期データの確認**
  - [ ] 「設定」シートに「取得動画数: 50」が設定されている
  - [ ] 「チャンネルリスト」シートにサンプル行が2行ある

---

### 7.2 カスタムメニューのテスト

- [ ] **メニューの表示**
  - [ ] スプレッドシートを再読み込み（F5）
  - [ ] メニューバーに「📊 YouTube分析」が表示される
  
- [ ] **メニュー項目の確認**
  - [ ] 📺 チャンネル情報を取得
  - [ ] 🎬 動画情報を取得
  - [ ] 🔄 すべて実行
  - [ ] （セパレーター）
  - [ ] 🗑️ データをクリア
  - [ ] （セパレーター）
  - [ ] ⚙️ 初期セットアップ

---

### 7.3 チャンネル情報取得のテスト

#### テストデータの準備

テスト用に以下のチャンネルIDを使用します（実在する人気チャンネル）：

| チャンネルID | メモ | 説明 |
|-------------|------|------|
| UCX6OQ3DkcsbYNE6H8uQQuVA | MrBeast | 世界最大級のYouTuber |
| UC-lHJZR3Gqxm24_Vd_AJ5Yw | PewDiePie | 老舗人気チャンネル |
| UCq-Fj5jknLsUf-MWSy4_brA | T-Series | インド最大の音楽チャンネル |

#### 手順

- [ ] **チャンネルリストの登録**
  - [ ] 「チャンネルリスト」シートを開く
  - [ ] サンプル行を削除
  - [ ] 上記3つのチャンネルIDをA列に入力
  - [ ] B列にメモを入力
  - [ ] C列の「有効」にチェックを入れる

- [ ] **チャンネル情報取得の実行**
  - [ ] メニューから「📺 チャンネル情報を取得」をクリック
  - [ ] Toast通知で進捗が表示される
  - [ ] 処理が完了すると完了ダイアログが表示される
  - [ ] ダイアログに以下が表示される：
    - [ ] 成功件数: 3件
    - [ ] 失敗件数: 0件
    - [ ] 所要時間

- [ ] **取得データの確認**
  - [ ] 「チャンネル情報」シートにデータが表示される
  - [ ] 3行のデータが追加されている
  - [ ] 各列のデータが正しく表示される：
    - [ ] 取得日時（日時形式）
    - [ ] チャンネルID
    - [ ] チャンネル名
    - [ ] 登録者数（カンマ区切り）
    - [ ] 総視聴回数（カンマ区切り）
    - [ ] 動画数（カンマ区切り）
    - [ ] 開設日（日付形式）
    - [ ] カスタムURL
    - [ ] 説明文
    - [ ] 国
    - [ ] サムネイルURL
    - [ ] チャンネルURL

- [ ] **データの正確性確認**
  - [ ] 登録者数がYouTubeの実際の値とほぼ一致している
  - [ ] チャンネル名が正しい
  - [ ] チャンネルURLをクリックすると正しいチャンネルが開く

---

### 7.4 動画情報取得のテスト

- [ ] **動画情報取得の実行**
  - [ ] メニューから「🎬 動画情報を取得」をクリック
  - [ ] Toast通知で進捗が表示される
  - [ ] 各チャンネルの処理状況が表示される
  - [ ] 処理が完了すると完了ダイアログが表示される
  - [ ] ダイアログに以下が表示される：
    - [ ] 処理チャンネル数
    - [ ] 取得動画数（最大150件 = 3チャンネル × 50動画）
    - [ ] 所要時間

- [ ] **取得データの確認**
  - [ ] 「動画情報」シートにデータが表示される
  - [ ] 複数行のデータが追加されている
  - [ ] 各列のデータが正しく表示される：
    - [ ] 取得日時（日時形式）
    - [ ] チャンネル名
    - [ ] チャンネルID
    - [ ] 動画ID
    - [ ] 動画タイトル
    - [ ] 公開日時（日時形式）
    - [ ] 視聴回数（カンマ区切り）
    - [ ] 高評価数（カンマ区切り）
    - [ ] コメント数（カンマ区切り）
    - [ ] 再生時間（秒）（カンマ区切り）
    - [ ] 再生時間（表示）（HH:MM:SSまたはMM:SS形式）
    - [ ] タグ（カンマ区切り）
    - [ ] カテゴリID
    - [ ] 説明文
    - [ ] サムネイルURL
    - [ ] 動画URL

- [ ] **データの正確性確認**
  - [ ] 動画タイトルが正しい
  - [ ] 再生時間の表示形式が正しい（例: 10:35, 1:05:23）
  - [ ] 動画URLをクリックすると正しい動画が開く
  - [ ] 各チャンネルの動画が混在していない

---

### 7.5 すべて実行のテスト

- [ ] **データクリア**
  - [ ] メニューから「🗑️ データをクリア」をクリック
  - [ ] 確認ダイアログが表示される
  - [ ] 「はい」をクリック
  - [ ] 完了メッセージが表示される
  - [ ] 「チャンネル情報」と「動画情報」シートのデータがクリアされる
  - [ ] ヘッダー行は残っている

- [ ] **すべて実行の実行**
  - [ ] メニューから「🔄 すべて実行」をクリック
  - [ ] ステップ1: チャンネル情報取得の進捗が表示される
  - [ ] チャンネル情報取得が完了
  - [ ] ステップ2: 動画情報取得の進捗が表示される
  - [ ] 動画情報取得が完了
  - [ ] 完了ダイアログが表示される
  - [ ] 総所要時間が表示される

- [ ] **両方のデータが取得されている**
  - [ ] 「チャンネル情報」シートにデータがある
  - [ ] 「動画情報」シートにデータがある

---

### 7.6 エラーハンドリングのテスト

#### 無効なチャンネルIDのテスト

- [ ] **無効なチャンネルIDを登録**
  - [ ] 「チャンネルリスト」シートに無効なID（例: `INVALID_ID_123`）を追加
  - [ ] 「有効」にチェックを入れる

- [ ] **チャンネル情報取得を実行**
  - [ ] エラーが発生せず処理が継続される
  - [ ] 完了ダイアログに失敗件数が表示される
  - [ ] 有効なチャンネルのデータは正しく取得される

#### 空のチャンネルリストのテスト

- [ ] **チャンネルリストをすべて無効化**
  - [ ] すべてのチャンネルの「有効」チェックを外す

- [ ] **チャンネル情報取得を実行**
  - [ ] エラーダイアログが表示される
  - [ ] 「有効なチャンネルが見つかりません」というメッセージが表示される

#### シート削除のテスト

- [ ] **シートを削除**
  - [ ] 「チャンネル情報」シートを削除

- [ ] **チャンネル情報取得を実行**
  - [ ] エラーダイアログが表示される
  - [ ] 「必要なシートが揃っていません」というメッセージが表示される
  - [ ] セットアップを実行するよう誘導される

- [ ] **初期セットアップで復旧**
  - [ ] メニューから「⚙️ 初期セットアップ」を実行
  - [ ] シートが再作成される

---

### 7.7 パフォーマンスのテスト

- [ ] **実行時間の計測**
  - [ ] 3チャンネルのチャンネル情報取得: 約5-10秒
  - [ ] 3チャンネルの動画情報取得: 約30秒-1分
  - [ ] すべて実行: 約1分以内

- [ ] **10チャンネルでのテスト**（オプション）
  - [ ] 10チャンネルを登録
  - [ ] チャンネル情報取得: 1分以内に完了
  - [ ] 動画情報取得: 3分以内に完了
  - [ ] 要件定義のパフォーマンス基準を満たしている

---

### 7.8 データ表示の確認

- [ ] **数値フォーマット**
  - [ ] 登録者数がカンマ区切りで表示される（例: 1,234,567）
  - [ ] 視聴回数がカンマ区切りで表示される
  - [ ] 高評価数、コメント数もカンマ区切り

- [ ] **日付フォーマット**
  - [ ] 取得日時が `yyyy-mm-dd hh:mm:ss` 形式
  - [ ] 公開日時が `yyyy-mm-dd hh:mm:ss` 形式
  - [ ] 開設日が `yyyy-mm-dd` 形式

- [ ] **URL表示**
  - [ ] チャンネルURLが正しく表示される
  - [ ] 動画URLが正しく表示される
  - [ ] URLをクリックすると正しいページが開く

- [ ] **列幅とレイアウト**
  - [ ] 各列の幅が適切に設定されている
  - [ ] ヘッダー行が固定されている（スクロール時も見える）
  - [ ] データが読みやすく整理されている

---

## 🎉 動作確認完了

すべてのチェック項目が完了したら、Phase 7完了です！

### 次のステップ

1. **タスクリストの更新**
   - `開発タスクリスト.md` のPhase 7を完了にマーク

2. **本番運用**
   - 実際の競合チャンネルIDを登録
   - 定期的にデータを取得
   - 分析に活用

3. **今後の拡張**
   - 定期自動実行の設定
   - 履歴データの保存
   - グラフ・レポート生成

---

## 🐛 問題が発生した場合

問題が発生した場合は、以下を確認してください：

1. **README.mdのトラブルシューティング**を参照
2. **実行ログ**（Apps Scriptエディタの「実行数」タブ）を確認
3. **YouTube Data APIのクォータ**を確認
4. **権限設定**を確認

---

**最終更新**: 2025-11-07  
**テスト担当**: _________________  
**テスト日時**: _________________


