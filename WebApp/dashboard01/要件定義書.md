# データ分析ダッシュボード 要件定義書

## 1. 概要

### 1.1 目的
顧客購買データ（sample-data.csv）を可視化・分析するためのインタラクティブなダッシュボードウェブアプリケーションを開発する。JavaScriptベースの技術スタックを使用し、ブラウザ上で動作するレスポンシブなダッシュボードを提供する。

### 1.2 背景
- 顧客購買データの可視化と分析によるビジネスインサイトの獲得
- リアルタイムでのデータフィルタリングと動的なグラフ更新
- ブラウザベースで環境構築が不要な軽量な分析ツールの提供

### 1.3 対象ユーザー
- データアナリスト
- マーケティング担当者
- 経営層・意思決定者
- ビジネスパーソン（データ分析初心者も含む）

### 1.4 対象データ
- **ファイル**: `sample-data.csv`
- **データ件数**: 約300件
- **データ項目**:
  - 顧客ID（数値）
  - 年齢（数値）
  - 性別（カテゴリ: 男性、女性）
  - 地域（カテゴリ: 関東、中部、関西、九州）
  - 購入カテゴリー（カテゴリ: スポーツ、家電、食品、ファッション、書籍）
  - 購入金額（数値）
  - 購入日（日付: 2023年〜2024年）
  - 支払方法（カテゴリ: クレジットカード、電子マネー、現金）

## 2. 機能要件

### 2.1 データ読み込み機能

#### 2.1.1 CSVファイル読み込み
- **FR-001**: CSVファイルをブラウザ上で読み込むことができる
- **FR-002**: CSVファイルのパース処理を実行する
- **FR-003**: データの型変換（数値、日付、文字列）を自動で行う
- **FR-004**: データ読み込み中のローディング表示を表示する
- **FR-005**: データ読み込みエラー時に適切なエラーメッセージを表示する

#### 2.1.2 データ検証
- **FR-006**: データの整合性チェック（欠損値、異常値の検出）
- **FR-007**: データ件数の表示
- **FR-008**: データ読み込み完了の通知

### 2.2 フィルタリング機能

#### 2.2.1 基本フィルタ
- **FR-009**: MUI `RadioGroup`または`Select`を使用した性別によるフィルタリング（男性、女性、すべて）
- **FR-010**: MUI `Select`を使用した地域によるフィルタリング（関東、中部、関西、九州、すべて）
- **FR-011**: MUI `Checkbox`または`Chip`を使用した購入カテゴリーによるフィルタリング（複数選択可能）
- **FR-012**: MUI `Checkbox`または`Chip`を使用した支払方法によるフィルタリング（複数選択可能）

#### 2.2.2 日付範囲フィルタ
- **FR-013**: 購入日の開始日・終了日を指定してフィルタリングできる
- **FR-014**: MUI X Date Pickersを使用した日付ピッカーUIを提供する
- **FR-015**: プリセット期間選択（今月、先月、四半期、年間など）をMUI `Button`または`Chip`で実装

#### 2.2.3 数値範囲フィルタ
- **FR-016**: MUI `Slider`または`TextField`（type="number"）を使用した年齢範囲によるフィルタリング
- **FR-017**: MUI `Slider`または`TextField`（type="number"）を使用した購入金額範囲によるフィルタリング

#### 2.2.4 フィルタ操作
- **FR-018**: MUI `Button`を使用したすべてのフィルタをリセットする機能
- **FR-019**: フィルタ適用時にグラフを自動更新する（Reactの状態管理とuseEffectを使用）
- **FR-020**: MUI `Typography`または`Chip`を使用したフィルタ適用後のデータ件数を表示する

### 2.3 可視化機能

#### 2.3.1 概要統計表示
- **FR-021**: MUI `Card`コンポーネントを使用したKPIカード形式で主要指標を表示
  - 総購入金額
  - 平均購入金額
  - 総顧客数
  - 平均年齢
  - 購入件数
  - MUI `Typography`と`Grid`を使用したレスポンシブレイアウト

#### 2.3.2 時系列分析
- **FR-022**: 購入金額の時系列推移グラフ（折れ線グラフ）
  - 日別、週別、月別、四半期別の集計切り替え
- **FR-023**: 購入件数の時系列推移グラフ
- **FR-024**: 複数カテゴリーの比較表示（複数系列の折れ線グラフ）

#### 2.3.3 カテゴリ別分析
- **FR-025**: 購入カテゴリー別の購入金額分布（棒グラフ）
- **FR-026**: 購入カテゴリー別の購入件数（棒グラフ）
- **FR-027**: 地域別の購入金額分布（棒グラフ）
- **FR-028**: 支払方法別の購入金額分布（円グラフまたは棒グラフ）
- **FR-029**: 性別の購入金額分布（棒グラフ）

#### 2.3.4 相関分析
- **FR-030**: 年齢と購入金額の散布図
- **FR-031**: 地域×購入カテゴリー×購入金額のヒートマップ
- **FR-032**: 性別×地域×購入金額のクロス集計表

#### 2.3.5 分布分析
- **FR-033**: 年齢の分布（ヒストグラム）
- **FR-034**: 購入金額の分布（ヒストグラム）
- **FR-035**: 年齢層別の購入金額（箱ひげ図）

#### 2.3.6 グラフ操作
- **FR-036**: グラフのズーム・パン機能
- **FR-037**: グラフのデータポイントホバー時に詳細情報を表示
- **FR-038**: グラフの凡例クリックで系列の表示/非表示を切り替え
- **FR-039**: グラフの画像エクスポート機能（PNG、SVG）

### 2.4 データテーブル機能

#### 2.4.1 データ表示
- **FR-040**: MUI X `DataGrid`を使用してフィルタ適用後のデータをテーブル形式で表示する
- **FR-041**: MUI X `DataGrid`の標準機能としてテーブルのソート機能（各列をクリックで昇順/降順切り替え）
- **FR-042**: MUI X `DataGrid`の標準機能としてテーブルのページネーション機能
- **FR-043**: MUI X `DataGrid`の標準機能として1ページあたりの表示件数選択（10件、25件、50件、100件、すべて）

#### 2.4.2 データエクスポート
- **FR-044**: MUI `Button`と`IconButton`を使用したフィルタ適用後のデータをCSV形式でエクスポート
- **FR-045**: MUI `Button`と`IconButton`を使用したフィルタ適用後のデータをExcel形式でエクスポート（オプション）

### 2.5 UI/UX機能

#### 2.5.1 レイアウト（MUI Gridシステム）
- **FR-046**: MUI `Grid`コンポーネントと`Container`を使用したレスポンシブデザイン（PC、タブレット、スマートフォン対応）
- **FR-047**: MUI `ThemeProvider`と`useTheme`を使用したダークモード/ライトモードの切り替え機能（MUI `Switch`または`IconButton`で切り替え）
- **FR-048**: MUI `Drawer`または`Paper`を使用したサイドバーにフィルタパネルを配置
- **FR-049**: MUI `Container`と`Grid`を使用したメインエリアにグラフとテーブルを配置

#### 2.5.2 操作性（MUIコンポーネント使用）
- **FR-050**: MUIのデザインシステムに基づいた直感的なUI操作
- **FR-051**: MUI `CircularProgress`または`Skeleton`を使用したローディング中の表示
- **FR-052**: MUI `Snackbar`と`Alert`を使用したエラー時のトースト通知
- **FR-053**: MUI `Snackbar`と`Alert`を使用した成功時のフィードバック表示

#### 2.5.3 パフォーマンス
- **FR-054**: データ処理の最適化（仮想スクロール、遅延読み込み）
- **FR-055**: グラフ描画の最適化（大量データ時のサンプリング）
- **FR-056**: フィルタ適用時のスムーズなアニメーション

## 3. 非機能要件

### 3.1 パフォーマンス要件
- **NFR-001**: 初期データ読み込み時間は3秒以内
- **NFR-002**: フィルタ適用後のグラフ更新は1秒以内
- **NFR-003**: 300件のデータをスムーズに表示・操作できる
- **NFR-004**: ブラウザのメモリ使用量を最適化する

### 3.2 互換性要件
- **NFR-005**: 主要ブラウザで動作する（Chrome、Firefox、Safari、Edge）
- **NFR-006**: 最新バージョンから2バージョン前までサポート
- **NFR-007**: モバイルブラウザでも基本機能が動作する

### 3.3 セキュリティ要件
- **NFR-008**: クライアントサイドのみで動作（サーバー不要）
- **NFR-009**: データはブラウザのメモリ内のみで処理（外部送信なし）
- **NFR-010**: CSVファイルはローカルで処理（アップロードなし）

### 3.4 ユーザビリティ要件
- **NFR-011**: 初回利用者でも直感的に操作できるUI
- **NFR-012**: 日本語UIを提供する
- **NFR-013**: アクセシビリティに配慮した設計（キーボード操作、スクリーンリーダー対応）

## 4. 技術要件

### 4.1 技術スタック

#### 4.1.1 フロントエンドフレームワーク
- **採用**: React（必須）
- **理由**: MUI（Material-UI）はReactベースのライブラリのため、Reactを採用
- **バージョン**: React 18.x以上

#### 4.1.2 データ可視化ライブラリ
- **推奨**: Recharts（React + MUIとの統合性が高い）
- **代替案**: Chart.js、Plotly.js
- **要件**: 
  - インタラクティブなグラフ作成
  - レスポンシブ対応
  - カスタマイズ性の高さ
  - MUIのテーマシステムとの統合

#### 4.1.3 CSVパーサー
- **推奨**: PapaParse、d3-dsv、またはcsv-parse
- **要件**: ブラウザ上でCSVファイルをパース

#### 4.1.4 UIコンポーネントライブラリ
- **採用**: Material-UI（MUI）v5以上（必須）
- **理由**: 
  - 豊富なコンポーネントライブラリ（Button、Card、TextField、Select、DatePicker等）
  - ダークモード/ライトモードのテーマシステム
  - レスポンシブデザインのサポート
  - アクセシビリティに配慮された設計
  - 日本語対応の日付ピッカー（MUI X Date Pickers）
- **主要コンポーネント**:
  - `@mui/material`: コアコンポーネント（Button、Card、TextField、Select、Slider等）
  - `@mui/icons-material`: アイコンセット
  - `@mui/x-date-pickers`: 日付ピッカーコンポーネント
  - `@mui/x-data-grid`: データグリッド（テーブル）コンポーネント

#### 4.1.5 データテーブル
- **採用**: MUI X Data Grid（必須）
- **理由**: 
  - MUIエコシステムとの統合性
  - ソート、ページネーション、フィルタリング機能を内蔵
  - 仮想スクロールによるパフォーマンス最適化
  - カスタマイズ性の高さ
  - レスポンシブ対応
- **要件**: ソート、ページネーション、フィルタリング機能

#### 4.1.6 日付処理
- **採用**: Day.js（必須、MUI X Date Pickersの推奨ライブラリ）
- **理由**: MUI X Date PickersがDay.jsを推奨しており、統合が容易
- **要件**: 日付のパース、フォーマット、計算
- **代替案**: date-fns、Luxon（MUI X Date Pickersでサポート）

#### 4.1.7 状態管理
- **推奨**: React Context API + useReducer、またはZustand
- **要件**: フィルタ状態とデータ状態の管理
- **理由**: MUIコンポーネントとの統合が容易で、シンプルな状態管理が可能

### 4.2 開発環境
- **Node.js**: 18.x以上
- **パッケージマネージャー**: npm、yarn、またはpnpm
- **ビルドツール**: Vite（推奨）、Create React App、またはNext.js
- **コード品質**: ESLint、Prettier
- **MUI関連パッケージ**:
  - `@mui/material`: コアコンポーネント
  - `@mui/icons-material`: アイコン
  - `@emotion/react`: CSS-in-JS（MUIのスタイリングエンジン）
  - `@emotion/styled`: スタイルコンポーネント
  - `@mui/x-date-pickers`: 日付ピッカー
  - `@mui/x-data-grid`: データグリッド
  - `dayjs`: 日付処理（MUI Date Pickersの推奨ライブラリ）

### 4.3 デプロイメント
- **推奨**: GitHub Pages、Netlify、Vercel、または静的ホスティング
- **要件**: 静的ファイルのホスティング（サーバーサイド不要）

## 5. UI/UX設計

### 5.1 レイアウト構成

```
┌─────────────────────────────────────────────────┐
│ ヘッダー（タイトル、テーマ切り替え）            │
├──────────┬──────────────────────────────────────┤
│          │  KPIカード（総購入金額、平均など）   │
│          ├──────────────────────────────────────┤
│ フィルタ │  グラフエリア                        │
│ パネル   │  - 時系列グラフ                      │
│          │  - カテゴリ別グラフ                  │
│          │  - 分布グラフ                        │
│          ├──────────────────────────────────────┤
│          │  データテーブル                      │
│          │  （ソート、ページネーション）         │
└──────────┴──────────────────────────────────────┘
```

### 5.2 カラーパレット（MUIテーマシステム）
- **プライマリカラー**: データ分析に適した色（青系推奨、MUIのデフォルトブルーまたはカスタム）
- **セカンダリカラー**: アクセントカラー（MUIテーマで設定）
- **グラフカラー**: カテゴリ別に識別しやすい色（10色以上、MUIのパレットから選択）
- **ダークモード**: MUIの`createTheme`を使用したダークテーマ
- **テーマ切り替え**: MUIの`ThemeProvider`と`useTheme`フックを使用
- **カスタムテーマ**: MUIのテーマシステムを活用してブランドカラーを適用可能

### 5.3 コンポーネント設計（MUIベース）
- **フィルタパネル**: MUI `Drawer`または`Paper`コンポーネントを使用した折りたたみ可能なサイドバー
- **KPIカード**: MUI `Card`コンポーネントを使用した数値と前回比較の表示
- **グラフカード**: MUI `Card`コンポーネント内にグラフを配置、タイトル、凡例、操作ボタンを含む
- **データテーブル**: MUI X `DataGrid`コンポーネントを使用、ソート可能な列、ページネーション機能内蔵
- **フィルタコンポーネント**: 
  - 性別・地域: MUI `Select`または`RadioGroup`
  - カテゴリー・支払方法: MUI `Checkbox`または`Chip`
  - 日付範囲: MUI X `DatePicker`
  - 年齢・金額範囲: MUI `Slider`または`TextField`（数値入力）
- **ボタン**: MUI `Button`コンポーネント
- **ローディング**: MUI `CircularProgress`または`Skeleton`コンポーネント
- **通知**: MUI `Snackbar`コンポーネント（トースト通知）

## 6. データ分析要件

### 6.1 集計機能
- **FR-057**: 日付単位での集計（日別、週別、月別、四半期別、年別）
- **FR-058**: カテゴリ別の集計（購入カテゴリー、地域、性別、支払方法）
- **FR-059**: 複数軸でのクロス集計

### 6.2 統計指標
- **FR-060**: 基本統計量の表示（平均、中央値、標準偏差、最大値、最小値）
- **FR-061**: パーセンタイルの計算と表示
- **FR-062**: 前年同月比、前月比の計算（オプション）

## 7. 開発フェーズ

### Phase 1: 基本機能実装（MVP）
- React + MUIのプロジェクトセットアップ
- MUIテーマシステムの設定（ライトモード/ダークモード）
- CSVファイル読み込み機能
- MUIコンポーネントを使用した基本的なフィルタリング機能（性別、地域、カテゴリー）
- Rechartsを使用した基本的なグラフ表示（棒グラフ、折れ線グラフ）
- MUI X DataGridを使用したデータテーブル表示

### Phase 2: 高度な可視化
- 時系列分析の強化
- 散布図、ヒートマップの実装
- 分布分析の追加
- グラフのインタラクティブ機能

### Phase 3: UI/UX改善
- MUI Gridシステムを使用したレスポンシブデザインの実装
- MUIテーマシステムを使用したダークモード対応の完成
- MUIの`Fade`、`Slide`、`Grow`などのトランジションコンポーネントを使用したアニメーション
- MUI X DataGridの仮想スクロール機能を活用したパフォーマンス最適化

### Phase 4: 高度な機能
- データエクスポート機能
- グラフエクスポート機能
- プリセット期間選択
- 統計指標の詳細表示

## 8. 制約事項と前提条件

### 8.1 前提条件
- **制約-001**: データはCSV形式で提供される
- **制約-002**: データはクライアントサイドで処理される（サーバー不要）
- **制約-003**: ブラウザのJavaScriptが有効である必要がある

### 8.2 制約事項
- **制約-004**: データサイズは300件程度を想定（将来的な拡張性は考慮）
- **制約-005**: 外部APIやデータベースへの接続は不要
- **制約-006**: オフライン動作を想定（インターネット接続不要）

### 8.3 将来の拡張性
- **拡張-001**: 複数CSVファイルの読み込みと統合
- **拡張-002**: データの保存機能（LocalStorage）
- **拡張-003**: カスタムレポートの作成と保存
- **拡張-004**: データのアップロード機能（サーバー連携）
- **拡張-005**: リアルタイムデータ更新機能

## 9. テスト要件

### 9.1 機能テスト
- **TEST-001**: CSVファイルの正常な読み込み
- **TEST-002**: 各フィルタの正常動作
- **TEST-003**: グラフの正常な描画
- **TEST-004**: データテーブルのソート・ページネーション
- **TEST-005**: データエクスポート機能

### 9.2 UI/UXテスト
- **TEST-006**: レスポンシブデザインの動作確認
- **TEST-007**: ダークモードの表示確認
- **TEST-008**: ブラウザ互換性テスト
- **TEST-009**: アクセシビリティテスト

### 9.3 パフォーマンステスト
- **TEST-010**: データ読み込み時間の測定
- **TEST-011**: フィルタ適用時の応答速度
- **TEST-012**: 大量データ時のメモリ使用量

## 10. ドキュメント要件

### 10.1 開発ドキュメント
- **DOC-001**: README.md（セットアップ手順、使用方法）
- **DOC-002**: 技術仕様書（アーキテクチャ、コンポーネント設計）
- **DOC-003**: API仕様書（コンポーネント間のインターフェース）

### 10.2 ユーザードキュメント
- **DOC-004**: ユーザーガイド（操作手順、機能説明）
- **DOC-005**: FAQ（よくある質問と回答）

## 11. 成功基準

### 11.1 機能面
- すべての主要機能が正常に動作する
- 300件のデータをスムーズに処理できる
- すべてのグラフが正確に描画される

### 11.2 パフォーマンス面
- 初期読み込み時間が3秒以内
- フィルタ適用後の更新が1秒以内
- ブラウザのメモリ使用量が適切な範囲内

### 11.3 ユーザビリティ面
- 初回利用者でも10分以内に基本操作を習得できる
- 主要ブラウザで正常に動作する
- モバイルデバイスでも基本機能が使用できる

## 12. リスクと対策

### 12.1 技術リスク
- **リスク-001**: 大量データ時のパフォーマンス低下
  - **対策**: 仮想スクロール、データサンプリング、遅延読み込みの実装
- **リスク-002**: ブラウザ互換性の問題
  - **対策**: ポリフィルの使用、主要ブラウザでのテスト

### 12.2 データリスク
- **リスク-003**: CSVファイルの形式が異なる場合のエラー
  - **対策**: エラーハンドリングの実装、データ検証機能の追加

## 13. 用語集

- **KPI**: Key Performance Indicator（重要業績評価指標）
- **CSV**: Comma-Separated Values（カンマ区切り値）
- **MVP**: Minimum Viable Product（最小実行可能製品）
- **レスポンシブデザイン**: 画面サイズに応じてレイアウトが変化する設計
- **MUI**: Material-UI（Material Designに基づいたReactコンポーネントライブラリ）
- **Material Design**: Googleが提唱するデザインシステム
- **Emotion**: CSS-in-JSライブラリ（MUIのスタイリングエンジン）

---

**作成日**: 2025年1月
**バージョン**: 1.0
**作成者**: AI Assistant

